# é€šç”¨æµ‹è¯•ç»„ä»¶ â€” ä»»åŠ¡æŠ¥å‘Š

> **æ—¥æœŸ**: 2026-02-25
> **çŠ¶æ€**: âœ… å®Œæˆ
> **è¦†ç›–æ¨¡å—**: Models / CryptoService / CrdtMerger

---

## ğŸ“Š æµ‹è¯•çŸ©é˜µ

| æ¨¡å— | æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•æ•° | çŠ¶æ€ |
|:---------|:------|:----:|:---:|
| HLC | `test/unit/models/model_contract_test.dart` | 9 | âœ… |
| PasswordPayload | åŒä¸Š | 2 | âœ… |
| PasswordCard | åŒä¸Š | 6 | âœ… |
| PasswordEvent | åŒä¸Š | 5 | âœ… |
| EncryptedPayload | åŒä¸Š | 2 | âœ… |
| AuthPayload | åŒä¸Š | 3 | âœ… |
| AuthCard | åŒä¸Š | 3 | âœ… |
| EventUtils | åŒä¸Š | 3 | âœ… |
| CryptoService | `test/unit/crypto/crypto_contract_test.dart` | 31 | âœ… |
| CrdtMerger | `test/unit/crdt/crdt_contract_test.dart` | 28 | âœ… |
| **æ€»è®¡** | | **93** | âœ… |

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### é€šç”¨æ€§è®¾è®¡åŸåˆ™

```
test/
â”œâ”€â”€ helpers/                         â† é€šç”¨åŸºåº§
â”‚   â”œâ”€â”€ test_helpers.dart            â† ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ test_fixtures.dart           â† æ•°æ®å·¥å‚ï¼ˆBuilder æ¨¡å¼ï¼‰
â”‚   â””â”€â”€ test_matchers.dart           â† è¡Œä¸ºå¥‘çº¦ Matcher
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ model_contract_test.dart â† æ¨¡å‹åºåˆ—åŒ–å¥‘çº¦
â”‚   â”œâ”€â”€ crypto/
â”‚   â”‚   â””â”€â”€ crypto_contract_test.dart â† å¯†ç å­¦è¡Œä¸ºå¥‘çº¦
â”‚   â””â”€â”€ crdt/
â”‚       â””â”€â”€ crdt_contract_test.dart   â† CRDT æ•°å­¦å±æ€§æµ‹è¯•
```

### ä¸ºä½•é«˜åº¦æŠ—å˜æ›´

1. **æ•°æ®å·¥å‚é›†ä¸­åŒ– (`test_fixtures.dart`)**
   - æ‰€æœ‰æµ‹è¯•æ•°æ®é€šè¿‡å·¥å‚å‡½æ•°åˆ›å»ºï¼Œ**å­—æ®µå˜æ›´æ—¶åªéœ€æ”¹å·¥å‚ä¸€å¤„**
   - Builder æ¨¡å¼å…è®¸æŒ‰éœ€è¦†ç›–ä¸ªåˆ«å­—æ®µï¼Œæ— éœ€æ¯ä¸ªæµ‹è¯•éƒ½å†™å…¨æ„é€ å‚æ•°

2. **è¡Œä¸ºå¥‘çº¦ Matcher (`test_matchers.dart`)**
   - æµ‹è¯• "æ˜¯å¦æ»¡è¶³å¥‘çº¦"ï¼ˆå¦‚ round-trip ä¸å˜å¼ï¼‰è€Œé "è¾“å‡ºæ˜¯å¦ç­‰äºç‰¹å®šå€¼"
   - ç¤ºä¾‹ï¼š`isPasswordCardSerializable` éªŒè¯ `toMapâ†’fromMap` ç­‰ä»·æ€§ï¼Œè€Œéæ£€æŸ¥ç‰¹å®š Map key
   - å³ä½¿å†…éƒ¨ä» AES-GCM æ¢æˆ XChaCha20-Poly1305ï¼Œåªè¦åŠ è§£å¯†å¥‘çº¦ä¸å˜ï¼Œæµ‹è¯•ä¸æ–­è£‚

3. **CRDT æ•°å­¦å±æ€§æµ‹è¯•**
   - åŸºäº CRDT çš„æ•°å­¦ä¸å˜å¼ï¼ˆå¹‚ç­‰ã€äº¤æ¢ã€ç»“åˆå¾‹ï¼‰ï¼Œè¿™æ˜¯æ•°å­¦çœŸç†ï¼Œä¸éšå®ç°å˜åŒ–
   - å±æ€§æµ‹è¯•é£æ ¼ï¼ˆProperty-Basedï¼‰ï¼Œæ¯” example-based æ›´æŠ—é‡æ„

### å˜æ›´å½±å“åˆ†æ

| å¦‚æœå˜æ›´... | éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ |
|:---|:---|
| æ¨¡å‹å¢åˆ å­—æ®µ | ä»… `test_fixtures.dart` |
| ç®—æ³•ä» AES-GCM æ¢æˆ ChaCha20 | æ— éœ€ä¿®æ”¹ï¼ˆå¥‘çº¦ä¸å˜ï¼‰ |
| åºåˆ—åŒ–æ ¼å¼å˜æ›´ | ä»… `test_fixtures.dart` ä¸­çš„ Map å·¥å‚ |
| æ–°å¢ä¸€ä¸ªæ¨¡å‹ç±» | åœ¨ `test_fixtures.dart` åŠ å·¥å‚ + åœ¨ `test_matchers.dart` åŠ  Matcher |
| CRDT å†…éƒ¨é‡æ„ | æ— éœ€ä¿®æ”¹ï¼ˆæ•°å­¦å±æ€§ä¸å˜ï¼‰ |

---

## ğŸ”’ è¦†ç›–ç‡æå‡

| æ¨¡å— | ä¹‹å‰ | ç°åœ¨ |
|:---|:---:|:---:|
| CryptoService | ~60% | **~90%** |
| HLC | ~70% | **~95%** |
| Models (åºåˆ—åŒ–) | 0% | **~85%** |
| CrdtMerger | 0% | **~80%** |
| EventUtils | 0% | **~90%** |

---

*æŠ¥å‘Šç”Ÿæˆæ—¶é—´: 2026-02-25T22:10:00+08:00*
